# AI 图片生成器 Web 应用

基于火山引擎视觉 API 的 AI 图片生成 Web 应用。

## 功能特性

- ✨ **提示词生成**：输入文本描述，AI 自动生成图片
- 🖼️ **参考图片**：支持上传 1-4 张参考图片（图生图）
- 📐 **多种比例**：支持 1:1、2:3、3:2、3:4、4:3、16:9、9:16
- 🎯 **多种分辨率**：1K、2K、4K 可选（默认 2K）
- 🔢 **批量生成**：一次生成多张图片
- 💾 **自动命名**：支持自定义输出文件名
- 🌐 **Web 界面**：友好的图形界面，无需命令行

## 安装依赖

```powershell
# 激活虚拟环境（如果还没有）
.\.venv\Scripts\Activate.ps1

# 安装依赖
pip install -r requirements.txt
```

## 配置环境变量

在项目根目录创建 `.env` 文件：

```bash
VOLCENGINE_AK=你的AccessKey
VOLCENGINE_SK=你的SecretKey
```

## 启动应用

```powershell
# 方法 1: 直接运行
python web_app.py

# 方法 2: 使用虚拟环境的 Python
.\.venv\Scripts\python.exe web_app.py
```

启动后访问: http://localhost:5000

## 使用说明

### 1. 填写基本信息

- **提示词**（必填）：描述你想生成的图片内容
- **负面提示词**（可选）：描述不想出现的内容

### 2. 上传参考图片（可选）

- 点击上传区域或拖拽图片
- 最多上传 4 张
- 支持 JPG、PNG 格式

### 3. 配置参数

- **图片比例**：选择输出图片的宽高比
  - 1:1 - 正方形（适合头像、图标）
  - 2:3 / 3:2 - 常用照片比例
  - 3:4 / 4:3 - 传统相机比例
  - 16:9 - 宽屏（适合横幅）
  - 9:16 - 手机屏（适合竖版海报）

- **分辨率**：选择输出质量
  - 1K：快速预览
  - 2K：推荐（默认）
  - 4K：高清输出

- **生成数量**：1-10 张
- **采样步数**：20-50（推荐 28）
- **种子值**：0 为随机，固定值可复现结果
- **输出文件名**：自定义文件名前缀

### 4. 生成与下载

- 点击"开始生成"按钮
- 等待生成完成（每张约 10-20 秒）
- 图片会显示在右侧，点击"下载图片"保存

## 输出文件

生成的图片保存在 `output/` 目录：
- 单张：`文件名.jpg`
- 多张：`文件名_1.jpg`、`文件名_2.jpg` ...

## 命令行版本

如果需要使用命令行版本：

```powershell
python scripts\sdk_call_test.py `
  --prompt "你的提示词" `
  --width 2048 --height 2048 `
  --num_images 2
```

## 注意事项

1. **网络要求**：需要稳定的网络连接访问火山引擎 API
2. **配额限制**：注意 API 调用配额和费用
3. **图片上传**：当前版本的参考图片需要先上传到云存储（OSS）才能使用，本地路径不支持
4. **生成时间**：根据分辨率和复杂度，每张图片生成需要 10-30 秒
5. **浏览器兼容**：推荐使用 Chrome、Edge、Firefox 等现代浏览器

## 技术栈

- **后端**：Flask（Python Web 框架）
- **前端**：HTML5 + CSS3 + JavaScript
- **API**：火山引擎视觉服务 SDK
- **图片处理**：Pillow

## 故障排除

### 问题：提示 AK/SK 未配置

**解决**：检查 `.env` 文件是否存在且包含正确的密钥

### 问题：生成失败

**解决**：
1. 检查网络连接
2. 确认 API 配额是否充足
3. 查看终端错误日志

### 问题：图片不显示

**解决**：检查 `output/` 目录权限，确保应用可以写入文件

## 许可证

MIT License
