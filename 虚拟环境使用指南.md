# Python虚拟环境 - 快速参考指南

## 🎉 虚拟环境已创建成功！

虚拟环境位置：`d:\project\jimeng4_image_generator\venv\`

### ✅ 已完成的设置

1. ✓ Python 3.11.9 已安装
2. ✓ 虚拟环境已创建（venv）
3. ✓ 所有依赖包已安装

### 📦 已安装的依赖包

- ✓ requests 2.32.5
- ✓ python-dotenv 1.2.1
- ✓ Pillow 12.0.0
- ✓ Flask 3.1.2
- ✓ volcengine 1.0.209
- ✓ oss2 2.19.1

以及所有必要的子依赖包。

## 🚀 使用方法

### 方法一：使用快速启动脚本（推荐）

**Windows CMD：**
```cmd
启动应用.bat
```

**PowerShell：**
```powershell
.\激活环境.ps1
python web_app.py
```

### 方法二：手动操作

#### 1. 激活虚拟环境

**PowerShell：**
```powershell
.\venv\Scripts\Activate.ps1
```

**CMD：**
```cmd
venv\Scripts\activate.bat
```

激活成功后，命令提示符前会显示 `(venv)`。

#### 2. 运行应用

```bash
# 启动Web界面
python web_app.py

# 或使用命令行工具（需要有main.py）
python main.py --prompt "您的提示词"
```

#### 3. 退出虚拟环境

```bash
deactivate
```

## ⚙️ 配置API密钥

在首次运行前，请配置您的API密钥：

1. 编辑 `.env` 文件
2. 填入火山引擎的密钥：
   ```env
   VOLCENGINE_AK=your_access_key_here
   VOLCENGINE_SK=your_secret_key_here
   ```
3. 保存文件

获取密钥：https://console.volcengine.com/iam/keymanage/

## 🔧 常用命令

在虚拟环境激活状态下：

```bash
# 查看已安装的包
pip list

# 安装新包
pip install 包名

# 更新某个包
pip install --upgrade 包名

# 导出依赖列表
pip freeze > requirements.txt

# 安装所有依赖
pip install -r requirements.txt

# 检查Python版本
python --version

# 运行测试
python test_oss.bat
python test_sample_api.py
```

## 📁 项目结构

```
jimeng4_image_generator/
├── venv/                  # 虚拟环境目录（已创建）
├── .env                   # 配置文件（需要填写密钥）
├── .env.example          # 配置文件示例
├── web_app.py            # Web应用主文件
├── database.py           # 数据库操作
├── requirements.txt      # 依赖包列表
├── 启动应用.bat          # 快速启动脚本（CMD）
├── 激活环境.ps1          # 环境激活脚本（PowerShell）
├── templates/            # HTML模板
├── static/               # 静态文件
└── uploads/              # 上传文件目录
```

## ⚠️ 注意事项

1. **每次使用前都需要激活虚拟环境**
2. **.env 文件包含敏感信息，不要提交到Git**
3. **venv目录不需要提交到Git**（已在.gitignore中）
4. **PowerShell执行策略**：如果遇到脚本无法执行的问题，运行：
   ```powershell
   Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
   ```

## 🐛 常见问题

### Q: 激活虚拟环境时出错？
**A:** 确保使用正确的命令：
- PowerShell: `.\venv\Scripts\Activate.ps1`
- CMD: `venv\Scripts\activate.bat`

### Q: pip命令找不到？
**A:** 确保虚拟环境已激活（提示符前应显示 `(venv)`）

### Q: 如何重新创建虚拟环境？
**A:** 删除venv目录后重新创建：
```bash
# 删除旧环境
Remove-Item -Recurse -Force venv

# 创建新环境
python -m venv venv

# 激活并安装依赖
.\venv\Scripts\Activate.ps1
pip install -r requirements.txt
```

## 📚 相关文档

- [README.md](README.md) - 项目总体说明
- [WEB_README.md](WEB_README.md) - Web界面使用指南
- [环境设置指南.md](环境设置指南.md) - 详细的环境设置说明

## 🎯 下一步

1. ✅ 虚拟环境已就绪
2. ⚠️ 请配置 `.env` 文件中的API密钥
3. 🚀 运行 `启动应用.bat` 或手动启动应用
4. 🌐 在浏览器访问 http://localhost:5000

---

祝使用愉快！ 🎨
